{% extends '@EasyAdmin/page/content.html.twig' %}

{% block content %}

<main>

<div class="row m-5 d-flex">

    <div class="col-12 d-flex">

        <a href="{{ path('app_accueil') }}">
            <img src="/images/district/logo.webp" alt="Logo The District" width="150" height="auto" class="bordures_logo rounded-4">
        </a>

        <h1 class="d-flex align-items-center ms-5">
            Bienvenue dans l'interface de gestion The District.
        </h1>

    </div>

</div>

<div class="row m-5">

    {# TITRES ONGLETS #}
    <ul class="nav nav-tabs fs-3 fw-medium">

        <li class="nav-item">
            <a class="nav-link active" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Nouvelles commandes</a>
        </li>

        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Commandes en livraison</a>
        </li>

        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Commandes livrées</a>
        </li>

    </ul>

    {# CONTENU ONGLETS #}
    <div class="tab-content fs-4">

        {# ONGLET NOUVELLES COMMANDES #}
        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">

            {# CARD COMMANDE #}
            {% for commande in commandesAvecDetails %}
            <div class="card mt-5" style="width: auto;">

                <div class="card-header fw-medium d-flex justify-content-between">

                    <p>Commande n° {{ commande.commande.id }} du {{ commande.commande.dateCommande|date('d/m/Y') }}.<p>

                    <p>
                        {% if commande.commande.etat == 0 %}
                        Enregistrée
                        {% elseif commande.commande.etat == 1 %}
                        Préparation
                        {% elseif commande.commande.etat == 2 %}
                        Livraison
                        {% elseif commande.commande.etat == 3 %}
                        Livrée
                        {% else %}
                        État inconnu
                        {% endif %}
                    </p>

                </div>

                <ul class="list-group list-group-flush">

                    {% for detail in commande.details %}
                    <li class="list-group-item d-flex align-items-center">
                        
                        <img src="/images/plats/{{ detail.plat.image }}" class="img-fluid m-3 rounded-4 border_image" style="width: 6rem; height: 6rem;" alt="{{ detail.plat.libelle }}" title="{{ detail.plat.libelle }}">
                        
                        <div class="col-4 ms-5">{{ detail.plat.libelle }}</div>
                        
                        <div class="col-4">x {{ detail.quantite }}</div>

                    </li>
                    {% endfor %}

                    {# ADRESSE FACTURATION COMMANDE #}
                    <li class="list-group-item mt-3">
                    
                        <p class="fs-4 fw-medium"><span class="text-decoration-underline">Adresse de facturation</span> :</p>

                        <table class="table">
                            <tbody class="fs-4">
                                <tr class="">
                                    <td class="col-lg-3 fw-medium">
                                        Nom :
                                    </td>
                                    <td class="col-lg-9">
                                        {{ commande.commande.utilisateur.nom }}
                                    </td>
                                </tr>
                                <tr class="">
                                    <td class="fw-medium">
                                        Prénom :
                                    </td>
                                    <td>
                                        {{ commande.commande.utilisateur.prenom }}
                                    </td>
                                </tr>
                                <tr class="">
                                    <td class="fw-medium">
                                        Adresse :
                                    </td>
                                    <td>
                                        {% if commande.commande.utilisateur.adresseFacturation is null %}
                                        {{ commande.commande.utilisateur.adresse }}
                                        {% else %}
                                        {{ commande.commande.utilisateur.adresseFacturation }}
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr class="">
                                    <td class="fw-medium">
                                        Code postal :
                                    </td>
                                    <td>
                                        {% if commande.commande.utilisateur.cpFacturation is null %}
                                        {{ commande.commande.utilisateur.cp }}
                                        {% else %}
                                        {{ commande.commande.utilisateur.cpFacturation }}
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr class="">
                                    <td class="fw-medium">
                                        Ville :
                                    </td>
                                    <td>
                                        {% if commande.commande.utilisateur.villeFacturation is null %}
                                        {{ commande.commande.utilisateur.ville }}
                                        {% else %}
                                        {{ commande.commande.utilisateur.villeFacturation }}
                                        {% endif %}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        
                    </li>

                    {# ADRESSE LIVRAISON COMMANDE #}
                    <li class="list-group-item">
                    
                        <p class="fs-4 fw-medium"><span class="text-decoration-underline">Adresse de livraison</span> :</p>

                        <table class="table">
                            <tbody class="fs-4">
                                <tr class="">
                                    <td class="col-lg-3 fw-medium">
                                        Nom :
                                    </td>
                                    <td class="col-lg-9">
                                        {{ commande.commande.utilisateur.nom }}
                                    </td>
                                </tr>
                                <tr class="">
                                    <td class="fw-medium">
                                        Prénom :
                                    </td>
                                    <td>
                                        {{ commande.commande.utilisateur.prenom }}
                                    </td>
                                </tr>
                                <tr class="">
                                    <td class="fw-medium">
                                        Adresse :
                                    </td>
                                    <td>
                                        {% if commande.commande.utilisateur.adresseLivraison is null %}
                                        {{ commande.commande.utilisateur.adresse }}
                                        {% else %}
                                        {{ commande.commande.utilisateur.adresseLivraison }}
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr class="">
                                    <td class="fw-medium">
                                        Code postal :
                                    </td>
                                    <td>
                                        {% if commande.commande.utilisateur.cpLivraison is null %}
                                        {{ commande.commande.utilisateur.cp }}
                                        {% else %}
                                        {{ commande.commande.utilisateur.cpLivraison }}
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr class="">
                                    <td class="fw-medium">
                                        Ville :
                                    </td>
                                    <td>
                                        {% if commande.commande.utilisateur.villeLivraison is null %}
                                        {{ commande.commande.utilisateur.ville }}
                                        {% else %}
                                        {{ commande.commande.utilisateur.villeLivraison }}
                                        {% endif %}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    
                    </li>

                    {# CONTACTER CLIENT #}
                    <li class="list-group-item">

                        <p class="fs-4 fw-medium"><span class="text-decoration-underline">Contacter le client</span> :</p>

                        <table class="table">
                            <tbody class="fs-4">
                                <tr class="">
                                    <td class="col-lg-3 fw-medium">
                                        Téléphone :
                                    </td>
                                    <td class="col-lg-9">
                                        {{ commande.commande.utilisateur.telephone }}
                                    </td>
                                </tr>
                                <tr class="">
                                    <td class="fw-medium">
                                        Email :
                                    </td>
                                    <td>
                                        {{ commande.commande.utilisateur.email }}
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                    </li>

                    {# BOUTON VALIDER POUR LIVRAISON #}
                    <li class="list-group-item mx-auto">

                        <a class="d-flex justify-content-center align-items-center fw-medium  shadow-lg fs-5 bouton_categories mt-3 mb-5"
                            id="precedent" style="width: 15rem; height: 3rem;"  href="#" role="button">
                            Valider pour livraison
                        </a>

                    </li>

                </ul>

            </div>
            {% endfor %}

        </div>

        {# ONGLET COMMANDES EN LIVRAISON #}
        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
            <p>Contenu de commandes en livraison</p>

        </div>

        {# ONGLET COMMANDES LIVREES #}
        <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
            <p>Contenu de commandes livrées</p>

        </div>

    </div>

</div>


{# BOUTON RETOUR AU SITE #}
<div class="row m-5 d-flex justify-content-center">

    <a class="d-flex justify-content-center align-items-center fw-medium  shadow-lg fs-5 bouton_categories mt-5"
        id="precedent" style="width: 15rem; height: 3rem;"  href="{{ path('app_compte') }}" role="button">
        Retour au site
    </a>

</div>


</main>

{# SCRIPTS JAVASCRIPT POUR ONGLETS #}
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>

{% endblock %}