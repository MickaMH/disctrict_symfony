{% extends 'base.html.twig' %}

{% block title %}Espace compte{% endblock %}

{% block body %}


{# MAIN #}
<main class="container-fluid pb-lg-5">

    {# EN-TETE COMPTE #}
    <div class="row d-flex justify-content-center">

        <div class="col-sm-10 col-lg-3 fs-1 fw-medium mb-lg-3 mt-3 mt-lg-3 text-center">

            <p class="lettres fond_intitule">ESPACE COMPTE</p>

        </div>

    </div>

    <div class="row">

        <p class="col-lg-6 offset-lg-3 liens_header_bonjour fs-2 fw-medium">Bonjour <span class="lettres">{{ app.user.prenom }}<span></p>

    </div>

    <div class="row d-flex justify-content-around mb-5">

        <div class="accordion col-lg-7" id="accordionExample">

            {# INFOS PERSONNELLES #}
            <div class="accordion-item bordures_accordion">

                <h2 class="accordion-header">
                    <button class="accordion-button collapsed fs-3 fw-medium" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                        Informations personnelles
                    </button>
                </h2>

                <div id="collapseOne" class="accordion-collapse collapse col-lg-12" data-bs-parent="#accordionExample">

                    <div class="accordion-body d-flex flex-column fs-4">

                        {# INFOS DESKTOP #}
                        <div class="d-none d-lg-block">
                        <table class="table">
                            <tbody class="fs-4">
                                <tr class="border_historique">
                                    <td class="col-lg-4 fw-medium">
                                        Nom :
                                    </td>
                                    <td class="col-lg-8">
                                        {{ app.user.nom }}
                                    </td>
                                </tr>
                                <tr class="border_historique">
                                    <td class="fw-medium">
                                        Prénom :
                                    </td>
                                    <td>
                                        {{ app.user.prenom }}
                                    </td>
                                </tr>
                                <tr class="border_historique">
                                    <td class="fw-medium">
                                        Email :
                                    </td>
                                    <td>
                                        {{ app.user.email }}
                                    </td>
                                </tr>
                                <tr class="border_historique">
                                    <td class="fw-medium">
                                        Téléphone :
                                    </td>
                                    <td>
                                        {{ app.user.telephone }}
                                    </td>
                                </tr>
                                <tr class="border_historique">
                                    <td class="fw-medium">
                                        Adresse :
                                    </td>
                                    <td>
                                        {{ app.user.adresse }}
                                    </td>
                                </tr>
                                <tr class="border_historique">
                                    <td class="fw-medium">
                                        Code postal :
                                    </td>
                                    <td>
                                        {{ app.user.cp }}
                                    </td>
                                </tr>
                                <tr class="border_historique">
                                    <td class="fw-medium">
                                        Ville :
                                    </td>
                                    <td>
                                        {{ app.user.ville }}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        </div>

                        {# INFOS MOBILE #}
                        <div class="d-block d-sm-none">
                        <table class="table">
                            <tbody class="fs-4 border border-white">

                                <tr>
                                    <td class="fw-medium">
                                        Nom :
                                    </td>
                                </tr>
                                <tr class="border_historique">
                                    <td class="">
                                        {{ app.user.nom }}
                                    </td>
                                </tr>

                                <tr>
                                    <td class="fw-medium">
                                        Prénom :
                                    </td>
                                </tr>
                                <tr class="border_historique">
                                    <td>
                                        {{ app.user.prenom }}
                                    </td>
                                </tr>

                                <tr>
                                    <td class="fw-medium">
                                        Email :
                                    </td>
                                </tr>
                                <tr class="border_historique">
                                    <td>
                                        {{ app.user.email }}
                                    </td>
                                </tr>

                                <tr>
                                    <td class="fw-medium">
                                        Téléphone :
                                    </td>
                                </tr>
                                <tr class="border_historique">
                                    <td>
                                        {{ app.user.telephone }}
                                    </td>
                                </tr>

                                <tr>
                                    <td class="fw-medium">
                                        Adresse :
                                    </td>
                                </tr>
                                <tr class="border_historique">
                                    <td>
                                        {{ app.user.adresse }}
                                    </td>
                                </tr>

                                <tr>
                                    <td class="fw-medium">
                                        Code postal :
                                    </td>
                                </tr>
                                <tr class="border_historique">
                                    <td>
                                        {{ app.user.cp }}
                                    </td>
                                </tr>

                                <tr>
                                    <td class="fw-medium">
                                        Ville :
                                    </td>
                                </tr>
                                <tr class="border_historique">
                                    <td>
                                        {{ app.user.ville }}
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                        </div>

                        <div class="mt-3">
                            <p class="fs-4">Vous pouvez modifier vos informations personnelles ci-dessous :</p>
                            <button type="button" class="d-none d-lg-block mb-3 mx-auto d-flex justify-content-center align-items-center fw-medium shadow-lg fs-5 rounded-4 bouton_envoyer" style="width: 18rem; height: 3rem;">
                                Modifier les informations
                            </button>
                            <button type="button" class="d-block d-sm-none mb-3 mx-auto d-flex justify-content-center align-items-center fw-medium shadow-lg fs-5 rounded-4 bouton_envoyer" style="width: 16rem; height: 3rem;">
                                Modifier les informations
                            </button>
                        </div>

                    </div>
                </div>
            </div>

            {# HISTORIQUE COMMANDES #}
            <div class="accordion-item bordures_accordion">

                <h2 class="accordion-header">
                    <button class="accordion-button collapsed fs-3 fw-medium" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        Historique des commandes
                    </button>
                </h2>

                <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">

                    <div class="accordion-body">

                        {# HISTORIQUE DESKTOP #}
                        <div class="d-none d-lg-block">
                            <table class="table">

                            {% for commande in commandes %}
                            <tbody class="fs-4">
                                <tr class="border_historique">
                                    <td>
                                        Commande n° <span class="fw-medium">{{ commande.id }}</span> du <span class="fw-medium">{{ commande.dateCommande|date('Y-m-d') }}</span>.
                                    </td>
                                    <td>
                                        Montant: <span class="fw-medium">{{ commande.total }} €</span>
                                    </td>
                                    <td class="text-success">
                                        Livrée &#10003;
                                    </td>
                                </tr>
                            </tbody>
                            {% endfor %}

                            </table>
                        </div>

                        {# HISTORIQUE MOBILE #}
                        <div class="d-block d-sm-none">

                            <table class="table">

                                {% for commande in commandes %}
                                <tbody class="fs-4 border border-white">

                                    <tr>
                                        <td>
                                            Commande n° <span class="fw-medium">{{ commande.id }}</span>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>
                                            du <span class="fw-medium">{{ commande.dateCommande|date('Y-m-d') }}</span>.
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>
                                            Montant: <span class="fw-medium">{{ commande.total }} €</span>
                                        </td>
                                    </tr>

                                    <tr class="border_historique">
                                        <td class="text-success">
                                            Livrée &#10003;
                                        </td>
                                    </tr>

                                </tbody>
                                {% endfor %}

                            </table>

                        </div>

                    </div>

                </div>

            </div>

            {# SUPPRIMER LE COMPTE #}
            <div class="accordion-item bordures_accordion">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed fs-3 fw-medium" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                        Suppression du compte
                    </button>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <p class="fs-4 mt-2">Vous pouvez supprimer votre compte ci-dessous :</p>

                        <div class="d-none d-lg-block">
                        <a href="{{ path('app_compte_supprimer') }}"
                                class="mb-3 d-flex justify-content-center align-items-center mx-auto fw-medium shadow-lg fs-5 rounded-4 bouton_envoyer"
                                style="width: 18rem; height: 3rem;">
                            Supprimer le compte
                        </a>
                        </div>
                        
                        <div class="d-block d-sm-none">
                        <a href="{{ path('app_compte_supprimer') }}"
                                class="mb-3 mx-auto d-flex justify-content-center align-items-center fw-medium shadow-lg fs-5 rounded-4 bouton_envoyer"
                                style="width: 15rem; height: 3rem;">
                            Supprimer le compte
                        </a>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>

    {# BOUTON SE DECONNECTER #}
    <div class="row mt-5 mb-5">

        <div class="col-sm-12 col-lg-12 d-flex justify-content-center">

            <a class="d-flex justify-content-center align-items-center fw-medium mx-auto shadow-lg fs-5 rounded-4 bouton_categories"
                style="width: 15rem; height: 3rem;" href="{{ path('app_logout') }}" role="button">Se déconnecter</a>

        </div>

    </div>

</main>
{% endblock %}
